<UserControl x:Class="Harmonogram.UserControls.WoodUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:util="clr-namespace:Harmonogram.Helper"
             xmlns:local="clr-namespace:Harmonogram.UserControls"
             xmlns:local1="clr-namespace:Harmonogram.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="8000"
             Loaded="Window_Loaded"
             Unloaded="UserControl_Unloaded"
             >
    <Grid>
        <Grid.Resources>
            <local1:DateBackgroundConverter x:Key="dateBackgroundConverter"/>
            <local1:MaterialBackgroundConverter x:Key="materialBackgroundConverter"/>
            <local1:VisibilityConverter x:Key="visibilityConverter"/>
        </Grid.Resources>
        <Grid x:Name="Grid" Grid.ColumnSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition Name="TitleRow" MaxHeight="24px" Height="24px"/>
                <RowDefinition Name="ToolbarRow" MaxHeight="24px" Height="24px"/>
                <RowDefinition Name="DatagridRow" Height="16*"/>
                <RowDefinition Name="ShowShopPart" MaxHeight="24px" Height="24px"/>
                <RowDefinition Name="NewTitleRow" MaxHeight="24px" Height="24px"/>
                <RowDefinition Name="NewToolbarRow" MaxHeight="24px" Height="24px"/>
                <RowDefinition Name="NewDatagridRow" Height="12*"/>
            </Grid.RowDefinitions>
            <Grid Grid.Row="0" Background="White" MaxHeight="24px">
                <Label x:Name="DepartmentTitle">Příprava Dřevo</Label>
            </Grid>

            <Grid Grid.Row="1" MaxHeight="24px" HorizontalAlignment="Left">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Button Grid.Column="0" Name="btnDelete" Click="btnDelete_Click" Width="64px" Padding="2" Margin="4,1,4,1" HorizontalAlignment="Right" >Odstranit</Button>
                <Button Grid.Column="1" Name="btnMove" Click="btnMove_Click" Padding="2" Margin="0,1,4,1" >Presun radku</Button>
                <Button Grid.Column="2" Name="btnArchive" Click="btnArchive_Click" Padding="2" Margin="0,1,4,1" > Archiv</Button>
                <Button Grid.Column="3" Name="btnExpedition" Click="btnExpedition_Click" Padding="2" Margin="0,1,4,1" >Expedice</Button>
                <Button Grid.Column="4" Name="btnRefresh" Click="btnRefresh_Click" Padding="2" Margin="0,1,4,1" >Obnovit</Button>
                <Button Grid.Column="5" Name="btnBackToShop" Click="btnBackToShop_Click" Padding="2" Margin="0,1,4,1" >Zpět obchod</Button>
                <Button Grid.Column="6" Click="btnPrint_Click" Name="btnPrint" Padding="2" Margin="0,1,4,1">Vytisknout</Button>
                <Button Grid.Column="7" Name="btnNewRow" Click="btnNewRow_Click" Padding="2" Margin="0,1,4,1" >Vložit prázdný řádek</Button>

                <Popup x:Name="Popupek" Placement="Bottom" StaysOpen="False" Width="200">
                    <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1" >
                        <StackPanel Margin="5,5,5,15">
                            <RadioButton x:Name="popupChck1" GroupName="Choice" Content="Splneno" IsChecked="True"/>
                            <RadioButton x:Name="popupChck2" GroupName="Choice" Content="Nevyrábí se" />
                            <RadioButton x:Name="popupChck3" Checked="choiceRadioBtn_Checked" Unchecked="choiceRadioBtn_Unchecked" GroupName="Choice" Content="Vlozit dodatecny text" />
                            <TextBlock x:Name="popupText1" Visibility="Collapsed">Doplnujici info:</TextBlock>
                            <TextBox MaxLength="29" Visibility="Collapsed" x:Name="popupText2"></TextBox>
                            <TextBlock x:Name="popupText3" Visibility="Collapsed"></TextBlock>
                            <Button Visibility="Collapsed" x:Name="popupColorBtn" Click="PopupColorBtn_changed" Content="Klikni pro zmenu barvy" ></Button>
                            <RadioButton x:Name="popupChck4" GroupName="Choice" Content="Zrusit" IsChecked="True"/>

                            <TextBlock></TextBlock>
                            <Button Padding="2,2,2,2" Click="PopupSave_Click" Content="Uloz"/>
                        </StackPanel>
                    </Border>
                </Popup>

                <Popup x:Name="PopPresun" Placement="Bottom" StaysOpen="False" Width="200">
                    <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1" >
                        <StackPanel Margin="5,5,5,15">
                            <TextBox x:Name="PopPresunText"></TextBox>
                            <Button Padding="2,2,2,2" Click="PopPresun_Click" Content="Presun"/>
                        </StackPanel>
                    </Border>
                </Popup>

            </Grid>
            <Grid Grid.Row="2">
                <DataGrid VirtualizingPanel.IsVirtualizing="True"
                              VirtualizingPanel.IsContainerVirtualizable="True" VirtualizingPanel.VirtualizationMode="Recycling"
                              EnableRowVirtualization="True" ScrollViewer.CanContentScroll="False" ScrollViewer.HorizontalScrollBarVisibility="Auto"
                              x:Name="WoodDatagrid" AutoGenerateColumns="False" SelectedItem="{Binding Current_order}" CanUserAddRows="False"
                              FrozenColumnCount="12" CanUserDeleteRows="False" CanUserSortColumns="False"
                              >
                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Background" Value="{Binding Color}"></Setter>
                            <Style.Resources>
                                <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="DarkGray"/>
                            </Style.Resources>
                        </Style>
                    </DataGrid.RowStyle>

                    <DataGrid.Resources>
                        <Style x:Key="MyCheckbox" TargetType="{x:Type CheckBox}">
                            <Setter Property="Width" Value="16px"></Setter>
                            <Setter Property="Height" Value="16px"></Setter>
                            <Setter Property="HorizontalAlignment" Value="Center"></Setter>
                            <Setter Property="VerticalAlignment" Value="Center"></Setter>
                            <Setter Property="LayoutTransform">
                                <Setter.Value>
                                    <TransformGroup>
                                        <ScaleTransform ScaleX="1.8" ScaleY="1.8"></ScaleTransform>
                                    </TransformGroup>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter Property="Background" Value="YellowGreen"></Setter>
                                </Trigger>
                                <Trigger Property="IsChecked" Value="False">
                                    <Setter Property="Background" Value="Yellow"></Setter>
                                </Trigger>
                            </Style.Triggers>
                        </Style>

                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="#FFEE8A38"></Setter>
                            <Setter Property="VerticalContentAlignment" Value="Center" />
                            <Setter Property="HorizontalContentAlignment" Value="Center"></Setter>
                            <Setter Property="Height" Value="64"></Setter>
                            <Setter Property="SeparatorVisibility" Value="Visible"></Setter>
                            <Setter Property="SeparatorBrush" Value="Black"></Setter>
                        </Style>
                        <Style x:Key="MyHeaderMainCheckBoxStyle" TargetType="{x:Type DataGridColumnHeader}" >
                            <Setter Property="Background" Value="#FFEE8A38"></Setter>
                            <Setter Property="Width" Value="64"></Setter>
                            <Setter Property="Height" Value="32"></Setter>
                            <Setter Property="MaxHeight" Value="32"></Setter>
                            <Setter Property="LayoutTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="270"></RotateTransform>
                                </Setter.Value>
                            </Setter>
                            <EventSetter Event="Click" Handler="CheckBoxHeader_Click" />
                        </Style>
                        <Style TargetType="Label" x:Key="SvisleOranzove">
                            <Setter Property="Background" Value="White"></Setter>
                            <Setter Property="Width" Value="64"></Setter>
                            <Setter Property="Height" Value="32"></Setter>
                            <Setter Property="MaxHeight" Value="32"></Setter>
                            <Setter Property="LayoutTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="270"></RotateTransform>
                                </Setter.Value>
                            </Setter>
                        </Style>

                        <Style x:Key="MyBtnTextStyle" TargetType="{x:Type TextBlock}">
                            <Setter Property="HorizontalAlignment" Value="Center"></Setter>
                            <Setter Property="VerticalAlignment" Value="Center"></Setter>
                        </Style>


                        <Style x:Key="MyBtnStyle" TargetType="{x:Type Button}">
                            <Setter Property="Width" Value="16px"></Setter>
                            <Setter Property="Height" Value="16px"></Setter>
                            <Setter Property="HorizontalAlignment" Value="Center"></Setter>
                            <Setter Property="VerticalAlignment" Value="Center"></Setter>
                            <Setter Property="LayoutTransform">
                                <Setter.Value>
                                    <TransformGroup>
                                        <ScaleTransform ScaleX="1.8" ScaleY="1.8"></ScaleTransform>
                                    </TransformGroup>
                                </Setter.Value>
                            </Setter>
                        </Style>


                        <Style x:Key="MyTextStyle" TargetType="{x:Type TextBlock}">
                            <Setter Property="HorizontalAlignment" Value="Left"></Setter>
                            <Setter Property="VerticalAlignment" Value="Center"></Setter>
                        </Style>
                        <Style x:Key="MyTextLeftAlignStyle" TargetType="{x:Type TextBlock}">
                            <Setter Property="VerticalAlignment" Value="Center"></Setter>
                        </Style>
                    </DataGrid.Resources>
                    <DataGrid.Columns>

                        <DataGridTextColumn IsReadOnly="True" ElementStyle="{StaticResource MyTextStyle}" Width="76" Binding="{Binding SortNr}">
                            <DataGridTextColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <Button Name="btnColumnsFilter" Margin="3,0,0,0" Click="btnColumnsFilter_Click">
                                        <Button.Template>
                                            <ControlTemplate>
                                                <Image Source="..\Resources\hide.ico" Width="30" Height="30" />
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Popup x:Name="ColumnsFilter" Placement="Bottom" PlacementTarget="{Binding ElementName=btnColumnsFilter}" StaysOpen="False" Width="200">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1">
                                            <StackPanel Margin="5,5,5,15">
                                                <ListBox MaxHeight="300px" x:Name="listBoxColumns" VerticalAlignment="Stretch" SelectionMode="Multiple" >
                                                    <ListBox.Resources>
                                                        <Style TargetType="ListBoxItem">
                                                            <Setter Property="OverridesDefaultStyle" Value="true" />
                                                            <Setter Property="SnapsToDevicePixels" Value="true" />
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="ListBoxItem">
                                                                        <CheckBox Checked="ColumnsChecked" Unchecked="ColumnsChecked" Margin="5,2" IsChecked="{TemplateBinding IsSelected}">
                                                                            <ContentPresenter />
                                                                        </CheckBox>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListBox.Resources>
                                                </ListBox>
                                                <Button Click="ButtonHide_Click">Skrýt okýnko</Button>
                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                </StackPanel>
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        
                        <DataGridTemplateColumn x:Name="ZahajeniDatum" Header="ZahajeniDatum" IsReadOnly="True" MinWidth="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <DatePicker Visibility="{Binding NotBlank, Converter={StaticResource visibilityConverter}}" IsEnabled="False" SelectedDateChanged="DatePicker_SelectedDateChanged" SelectedDate="{Binding Path=ZahajeniDatum}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn x:Name="Technik" IsReadOnly="True" ElementStyle="{StaticResource MyTextStyle}" Width="70" Binding="{Binding Technik}">
                            <DataGridTextColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Technik" />
                                    <Button Name="btnTechnikFilter" Margin="3,0,0,0" Click="btnFilter_Click">
                                        <Button.Template>
                                            <ControlTemplate>
                                                <Image Source="..\Resources\filter.ico" Width="20" Height="20" />
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Popup x:Name="TechnikFilter" Placement="Bottom" PlacementTarget="{Binding ElementName=btnTechnikFilter}" StaysOpen="False" Width="200">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1">
                                            <StackPanel Margin="5,5,5,15">
                                                <ListBox MaxHeight="300px" x:Name="listBoxTechnik" VerticalAlignment="Stretch" SelectionMode="Multiple" >
                                                    <ListBox.Resources>
                                                        <Style TargetType="ListBoxItem">
                                                            <Setter Property="OverridesDefaultStyle" Value="true" />
                                                            <Setter Property="SnapsToDevicePixels" Value="true" />
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="ListBoxItem">
                                                                        <CheckBox Checked="btnFilter_checked_Click" Unchecked="btnFilter_unchecked_Click" Margin="5,2" IsChecked="{TemplateBinding IsSelected}">
                                                                            <ContentPresenter />
                                                                        </CheckBox>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListBox.Resources>
                                                </ListBox>
                                                <Button x:Name="TechnikFiltrujBtn" Click="filtrujBtn_click" Content="Filtruj" Margin="5,5,5,5">
                                                </Button>
                                                <Button x:Name="TechnikAllBtn" Click="allBtn_click" Content="Zobrazit vše" Margin="5,5,5,5">
                                                </Button>

                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                </StackPanel>
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>

                        <DataGridTemplateColumn x:Name="Zakazka" CanUserSort="True" Width="120">
                            <DataGridTemplateColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Zakazka" />
                                    <Button Name="btnZakazkaFilter" Margin="3,0,0,0" Click="btnFilter_Click">
                                        <Button.Template>
                                            <ControlTemplate>
                                                <Image Source="..\Resources\filter.ico" Width="20" Height="20" />
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Popup x:Name="ZakazkaFilter" Placement="Bottom" PlacementTarget="{Binding ElementName=btnZakazkaFilter}" StaysOpen="False" Width="200">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1">
                                            <StackPanel Margin="5,5,5,15">
                                                <ListBox MaxHeight="300" x:Name="listBoxZakazka" VerticalAlignment="Stretch" SelectionMode="Multiple" >
                                                    <ListBox.Resources>
                                                        <Style TargetType="ListBoxItem">
                                                            <Setter Property="OverridesDefaultStyle" Value="true" />
                                                            <Setter Property="SnapsToDevicePixels" Value="true" />
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="ListBoxItem">
                                                                        <CheckBox Checked="btnFilter_checked_Click" Unchecked="btnFilter_unchecked_Click" Margin="5,2" IsChecked="{TemplateBinding IsSelected}">
                                                                            <ContentPresenter />
                                                                        </CheckBox>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListBox.Resources>
                                                </ListBox>
                                                <Button x:Name="ZakazkaFiltrujBtn" Click="filtrujBtn_click" Content="Filtruj" Margin="5,5,5,5">
                                                </Button>
                                                <Button x:Name="ZakazkaAllBtn" Click="allBtn_click" Content="Zobrazit vše" Margin="5,5,5,5">
                                                </Button>

                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                </StackPanel>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Label Name="Material" MouseDoubleClick="zakazkaColorBtn_changed" Content="{Binding Zakazka}" Background="{Binding ZakazkaColor}" >
                                        <Label.ToolTip>
                                            <TextBlock Text="{Binding Zakazka}"></TextBlock>
                                        </Label.ToolTip>
                                    </Label>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn x:Name="Poznamky" ElementStyle="{StaticResource MyTextStyle}" Width="80" Header="Poznamky" Binding="{Binding Poznamky}">
                            <DataGridTextColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="ToolTip" Value="{Binding Poznamky}" />
                                </Style>
                            </DataGridTextColumn.CellStyle>
                        </DataGridTextColumn>

                        <DataGridTemplateColumn x:Name="Material" >
                            <DataGridTemplateColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Material" />
                                    <Button Name="btnMaterialFilter" Margin="3,0,0,0" Click="btnFilter_Click">
                                        <Button.Template>
                                            <ControlTemplate>
                                                <Image Source="..\Resources\filter.ico" Width="20" Height="20" />
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Popup x:Name="MaterialFilter" Placement="Bottom" PlacementTarget="{Binding ElementName=btnZakazkaMaterial}" StaysOpen="False" Width="200">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1">
                                            <StackPanel Margin="5,5,5,15">
                                                <ListBox MaxHeight="300" x:Name="listBoxMaterial" VerticalAlignment="Stretch" SelectionMode="Multiple" >
                                                    <ListBox.Resources>
                                                        <Style TargetType="ListBoxItem">
                                                            <Setter Property="OverridesDefaultStyle" Value="true" />
                                                            <Setter Property="SnapsToDevicePixels" Value="true" />
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="ListBoxItem">
                                                                        <CheckBox Checked="btnFilter_checked_Click" Unchecked="btnFilter_unchecked_Click" Margin="5,2" IsChecked="{TemplateBinding IsSelected}">
                                                                            <ContentPresenter />
                                                                        </CheckBox>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListBox.Resources>
                                                </ListBox>
                                                <Button x:Name="MaterialFiltrujBtn" Click="filtrujBtn_click" Content="Filtruj" Margin="5,5,5,5">
                                                </Button>
                                                <Button x:Name="MaterialAllBtn" Click="allBtn_click" Content="Zobrazit vše" Margin="5,5,5,5">
                                                </Button>

                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                </StackPanel>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Label Name="Material" MouseDoubleClick="materialColorBtn_changed" Content="{Binding Material}" Background="{Binding MaterialColor}" >
                                        <Label.ToolTip>
                                            <TextBlock Text="{Binding Material}"></TextBlock>
                                        </Label.ToolTip>
                                    </Label>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn x:Name="Cislo_zakazky" ElementStyle="{StaticResource MyTextStyle}" Width="110" Binding="{Binding ZakazkaNr}">
                            <DataGridTextColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Cislo zakazky" />
                                    <Button Name="btnZakazkaNrFilter" Margin="3,0,0,0" Click="btnFilter_Click">
                                        <Button.Template>
                                            <ControlTemplate>
                                                <Image Source="..\Resources\filter.ico" Width="20" Height="20" />
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Popup x:Name="ZakazkaNrFilter" Placement="Bottom" PlacementTarget="{Binding ElementName=btnZakazkaNrFilter}" StaysOpen="False" Width="200">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1">
                                            <StackPanel Margin="5,5,5,15">
                                                <ListBox MaxHeight="300" x:Name="listBoxZakazkaNr" VerticalAlignment="Stretch" SelectionMode="Multiple" >
                                                    <ListBox.Resources>
                                                        <Style TargetType="ListBoxItem">
                                                            <Setter Property="OverridesDefaultStyle" Value="true" />
                                                            <Setter Property="SnapsToDevicePixels" Value="true" />
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="ListBoxItem">
                                                                        <CheckBox Checked="btnFilter_checked_Click" Unchecked="btnFilter_unchecked_Click" Margin="5,2" IsChecked="{TemplateBinding IsSelected}">
                                                                            <ContentPresenter />
                                                                        </CheckBox>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListBox.Resources>
                                                </ListBox>
                                                <Button x:Name="ZakazkaNrFiltrujBtn" Click="filtrujBtn_click" Content="Filtruj" Margin="5,5,5,5">
                                                </Button>
                                                <Button x:Name="ZakazkaNrAllBtn" Click="allBtn_click" Content="Zobrazit vše" Margin="5,5,5,5">
                                                </Button>

                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                </StackPanel>
                            </DataGridTextColumn.Header>
                            <DataGridTextColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="ToolTip" Value="{Binding ZakazkaNr}" />
                                </Style>
                            </DataGridTextColumn.CellStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn x:Name="Vyrobni_cislo" ElementStyle="{StaticResource MyTextStyle}" Width="110" Binding="{Binding VyrobniNr}">
                            <DataGridTextColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Vyrobni cislo" />
                                    <Button Name="btnVyrobniNrFilter" Margin="3,0,0,0" Click="btnFilter_Click">
                                        <Button.Template>
                                            <ControlTemplate>
                                                <Image Source="..\Resources\filter.ico" Width="20" Height="20" />
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Popup x:Name="VyrobniNrFilter" Placement="Bottom" PlacementTarget="{Binding ElementName=btnZakazkaFilter}" StaysOpen="False" Width="200">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1">
                                            <StackPanel Margin="5,5,5,15">
                                                <ListBox Height="300" x:Name="listBoxVyrobniNr" VerticalAlignment="Stretch" SelectionMode="Multiple" Margin="0,27,0,34">
                                                    <ListBox.Resources>
                                                        <Style TargetType="ListBoxItem">
                                                            <Setter Property="OverridesDefaultStyle" Value="true" />
                                                            <Setter Property="SnapsToDevicePixels" Value="true" />
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="ListBoxItem">
                                                                        <CheckBox Checked="btnFilter_checked_Click" Unchecked="btnFilter_unchecked_Click" Margin="5,2" IsChecked="{TemplateBinding IsSelected}">
                                                                            <ContentPresenter />
                                                                        </CheckBox>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListBox.Resources>
                                                </ListBox>
                                                <Button x:Name="VyrobniNrFiltrujBtn" Click="filtrujBtn_click" Content="Filtruj" Margin="5,5,5,5">
                                                </Button>
                                                <Button x:Name="VyrobniNrAllBtn" Click="allBtn_click" Content="Zobrazit vše" Margin="5,5,5,5">
                                                </Button>

                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                </StackPanel>
                            </DataGridTextColumn.Header>
                            <DataGridTextColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="ToolTip" Value="{Binding VyrobniNr}" />
                                </Style>
                            </DataGridTextColumn.CellStyle>

                        </DataGridTextColumn>

                        <DataGridTemplateColumn x:Name="UpravitSoubor">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Image Visibility="{Binding NotBlank, Converter={StaticResource visibilityConverter}}" Height="18" MouseUp="HandleLinkClick" Width="20" Source="..\Resources\document.ico"></Image>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="editUrl" x:Name="editUrl">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Image Visibility="{Binding NotBlank, Converter={StaticResource visibilityConverter}}" Height="18" MouseUp="HandleEditLinkClick" Width="20" Source="..\Resources\editicon.ico"></Image>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn x:Name="Kridla"  ElementStyle="{StaticResource MyTextStyle}" IsReadOnly="True" Width="50" Header="Křídla" Binding="{Binding KridlaText}">
                            <DataGridTextColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="ToolTip" Value="{Binding KridlaText}" />
                                </Style>
                            </DataGridTextColumn.CellStyle>

                        </DataGridTextColumn>
                        <DataGridTextColumn x:Name="Zarubne" ElementStyle="{StaticResource MyTextStyle}" IsReadOnly="True" Width="50" Header="Zárubně" Binding="{Binding ZarubneText}">
                            <DataGridTextColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="ToolTip" Value="{Binding ZarubneText}" />
                                </Style>
                            </DataGridTextColumn.CellStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn x:Name="PlosnyMaterial" ElementStyle="{StaticResource MyTextStyle}" Width="120" Header="Plosny Material" Binding="{Binding PlosnyMaterial}">
                            <DataGridTextColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="ToolTip" Value="{Binding PlosnyMaterial}" />
                                </Style>
                            </DataGridTextColumn.CellStyle>
                        </DataGridTextColumn>

                        <DataGridTemplateColumn Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Příprava" x:Name="Priprava">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding PripravaC}" Text="{Binding Priprava}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Priprava"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding PripravaC}" Text="{Binding Priprava}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Priprava"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="Dokumentace" Visibility="Hidden" x:Name="Dokumentace"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Dokumentace</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding DokumentaceC}" Name="Dokumentace" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding Dokumentace}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding Dokumentace}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="InDoca" Visibility="Hidden" x:Name="InDoca"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">InDoca</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding InDocaC}" Name="InDoca" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding InDoca}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding InDoca}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Oblozky -->
                        <DataGridTemplateColumn util:DatagridName.Name="Oblozky" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Obložky" x:Name="Oblozky">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding OblozkyC}" Text="{Binding Oblozky}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Oblozky"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding OblozkyC}" Text="{Binding Oblozky}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Oblozky"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="ObalovatOblozky" Visibility="Hidden" x:Name="ObalovatOblozky"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Obalovat</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding ObalovatOblozkyC}" Name="ObalovatOblozky" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding ObalovatOblozky}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding ObalovatOblozky}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="RezatOblozky" Visibility="Hidden" x:Name="RezatOblozky"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Rezat</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding RezatOblozkyC}" Name="RezatOblozky" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding RezatOblozky}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding RezatOblozky}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="CncOblozky" Visibility="Hidden" x:Name="CncOblozky"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Cnc</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding CncOblozkyC}" Name="CncOblozky" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding CncOblozky}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding CncOblozky}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Stredove -->
                        
                        <DataGridTemplateColumn util:DatagridName.Name="Stredove" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Středové" x:Name="Stredove">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding StredoveC}" Text="{Binding Stredove}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Stredove"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding StredoveC}" Text="{Binding Stredove}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Stredove"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn util:DatagridName.Name="CentrumStredove" Visibility="Hidden" x:Name="CentrumStredove"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Centrum</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding CentrumStredoveC}" Name="CentrumStredove" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding CentrumStredove}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding CentrumStredove}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="LisStredove" Visibility="Hidden" x:Name="LisStredove" >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Lis</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding LisStredoveC}" Name="LisStredove" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding LisStredove}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding LisStredove}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="OlepovaniStredove" Visibility="Hidden" x:Name="OlepovaniStredove" >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Olepovani</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding OlepovaniStredoveC}" Name="OlepovaniStredove" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding OlepovaniStredove}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding OlepovaniStredove}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="FrezovaniStredove" Visibility="Hidden" x:Name="FrezovaniStredove" >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Frezovani</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding FrezovaniStredoveC}" Name="FrezovaniStredove" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding FrezovaniStredove}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding FrezovaniStredove}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Ramecek -->

                        <DataGridTemplateColumn util:DatagridName.Name="Ramecek" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Rámeček" x:Name="Ramecek">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding RamecekC}" Text="{Binding Ramecek}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Ramecek"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding RamecekC}" Text="{Binding Ramecek}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Ramecek"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn util:DatagridName.Name="TypRamecek" Visibility="Hidden" x:Name="TypRamecek"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Typ</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding TypRamecekC}" Name="TypRamecek" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding TypRamecek}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding TypRamecek}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="ObalovaniRamecek" Visibility="Hidden" x:Name="ObalovaniRamecek"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Obalovani</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding ObalovaniRamecekC}" Name="ObalovaniRamecek" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding ObalovaniRamecek}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding ObalovaniRamecek}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="RezaniRamecek" Visibility="Hidden" x:Name="RezaniRamecek"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Rezani</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding RezaniRamecekC}" Name="RezaniRamecek" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding RezaniRamecek}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding RezaniRamecek}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Klapacka -->
                        <DataGridTemplateColumn util:DatagridName.Name="Klapacka" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Klapačka" x:Name="Klapacka">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding KlapackaC}" Text="{Binding Klapacka}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Klapacka"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding KlapackaC}" Text="{Binding Klapacka}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Klapacka"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="ObalovaniKlapacka" Visibility="Hidden" x:Name="ObalovaniKlapacka"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Obalovani</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding ObalovaniKlapackaC}" Name="ObalovaniKlapacka" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding ObalovaniKlapacka}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding ObalovaniKlapacka}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="RezaniKlapacka" Visibility="Hidden" x:Name="RezaniKlapacka"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Rezani</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding RezaniKlapackaC}" Name="RezaniKlapacka" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding RezaniKlapacka}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding RezaniKlapacka}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Posuv -->

                        <DataGridTemplateColumn util:DatagridName.Name="Posuv" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Posuv" x:Name="Posuv">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding PosuvC}" Text="{Binding Posuv}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Posuv"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding PosuvC}" Text="{Binding Posuv}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Posuv"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn util:DatagridName.Name="HranolPosuv" Visibility="Hidden" x:Name="HranolPosuv" >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Hranol</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding HranolPosuvC}" Name="HranolPosuv" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding HranolPosuv}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding HranolPosuv}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="GarnyzPosuv" Visibility="Hidden" x:Name="GarnyzPosuv"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Garnyz</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding GarnyzPosuvC}" Name="GarnyzPosuv" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding GarnyzPosuv}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding GarnyzPosuv}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="DorazovaPosuv" Visibility="Hidden" x:Name="DorazovaPosuv" >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Dorazova</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding DorazovaPosuvC}" Name="DorazovaPosuv" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding DorazovaPosuv}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding DorazovaPosuv}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Dvere -->

                        <DataGridTemplateColumn util:DatagridName.Name="Dvere" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Dveře" x:Name="Dvere">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding DvereC}" Text="{Binding Dvere}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Dvere"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding DvereC}" Text="{Binding Dvere}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Dvere"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="CentrumDvere" Visibility="Hidden" x:Name="CentrumDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Centrum</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding CentrumDvereC}" Name="CentrumDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding CentrumDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding CentrumDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="KorpusyDvere" Visibility="Hidden" x:Name="KorpusyDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Korpusy</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding KorpusyDvereC}" Name="KorpusyDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding KorpusyDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding KorpusyDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="SesazenkyDvere" Visibility="Hidden" x:Name="SesazenkyDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Sesazenky</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding SesazenkyDvereC}" Name="SesazenkyDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding SesazenkyDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding SesazenkyDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="LisDvere" Visibility="Hidden" x:Name="LisDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Lis</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding LisDvereC}" Name="LisDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding LisDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding LisDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="FormatkaDvere" Visibility="Hidden" x:Name="FormatkaDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Formatka</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding FormatkaDvereC}" Name="FormatkaDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding FormatkaDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding FormatkaDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="OlepovackaDvere" Visibility="Hidden" x:Name="OlepovackaDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Olepovacka</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding OlepovackaDvereC}" Name="OlepovackaDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding OlepovackaDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding OlepovackaDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="CncDvere" Visibility="Hidden" x:Name="CncDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Cnc</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding CncDvereC}" Name="CncDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding CncDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding CncDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="PgmDvere" Visibility="Hidden" x:Name="PgmDvere"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Pgm</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding PgmDvereC}" Name="PgmDvere" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding PgmDvere}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding PgmDvere}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Dokonceni -->

                        <DataGridTemplateColumn util:DatagridName.Name="Dokonceni" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Dokončení" x:Name="Dokonceni">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding DokonceniC}" Text="{Binding Dokonceni}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Dokonceni"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding DokonceniC}" Text="{Binding Dokonceni}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Dokonceni"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn util:DatagridName.Name="BrouseniDyhaDokonceni" Visibility="Hidden" x:Name="BrouseniDyhaDokonceni"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">BrouseniDyha</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding BrouseniDyhaDokonceniC}" Name="BrouseniDyhaDokonceni" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding BrouseniDyhaDokonceni}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding BrouseniDyhaDokonceni}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="ZakladDokonceni" Visibility="Hidden" x:Name="ZakladDokonceni"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Zaklad</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding ZakladDokonceniC}" Name="ZakladDokonceni" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding ZakladDokonceni}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding ZakladDokonceni}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="BrouseniZakladDokonceni" Visibility="Hidden" x:Name="BrouseniZakladDokonceni"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">BrouseniZaklad</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding BrouseniZakladDokonceniC}" Name="BrouseniZakladDokonceni" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding BrouseniZakladDokonceni}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding BrouseniZakladDokonceni}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="VrchDokonceni" Visibility="Hidden" x:Name="VrchDokonceni"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Vrch</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding VrchDokonceni}" Name="VrchDokonceni" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding VrchDokonceni}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding VrchDokonceni}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Kompletace -->

                        <DataGridTemplateColumn util:DatagridName.Name="Kompletace" Width="50" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Kompletace" x:Name="Kompletace">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding KompletaceC}" Text="{Binding Kompletace}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Kompletace"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding KompletaceC}" Text="{Binding Kompletace}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Kompletace"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn util:DatagridName.Name="DvereKompletace" Visibility="Hidden" x:Name="DvereKompletace"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Dvere</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding DvereKompletace}" Name="DvereKompletace" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding DvereKompletace}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding DvereKompletace}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="ZarubenKompletace" Visibility="Hidden" x:Name="ZarubenKompletace"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Zaruben</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding ZarubenKompletace}" Name="ZarubenKompletace" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding ZarubenKompletace}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding ZarubenKompletace}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Sklad -->

                        <DataGridTemplateColumn util:DatagridName.Name="Sklad" Width="60" HeaderStyle="{StaticResource MyHeaderMainCheckBoxStyle}" Header="Sklad" x:Name="Sklad">
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Background="{Binding SkladC}" Text="{Binding Sklad}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Sklad"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Background="{Binding SkladC}" Text="{Binding Sklad}" IsEnabled="{Binding PripravaAccess, ElementName=myDepartment}" Name="Sklad"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn util:DatagridName.Name="KovaniSklad" Visibility="Hidden" x:Name="KovaniSklad"  >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Kovani</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding KovaniSklad}" Name="KovaniSklad" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding KovaniSklad}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding KovaniSklad}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn util:DatagridName.Name="SkloSklad" Visibility="Hidden" x:Name="SkloSklad" >
                            <DataGridTemplateColumn.Header>
                                <Label Style="{StaticResource SvisleOranzove}">Sklo</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource MyBtnStyle}" Background="{Binding SkloSklad}" Name="SkloSklad" Margin="3,0,0,0" Click="Proces_Click">
                                        <Button.ToolTip>
                                            <TextBlock Text="{Binding SkloSklad}"></TextBlock>
                                        </Button.ToolTip>
                                        <TextBlock Style="{StaticResource MyBtnTextStyle}" Text="{Binding SkloSklad}" ></TextBlock>
                                    </Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn x:Name="PozadovanyDatum" Header="Pozadovany Datum" MinWidth="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <DatePicker Background="{Binding PozadovanyColor}" MouseDoubleClick="DatePickerPoz_MouseDoubleClick" Visibility="{Binding NotBlank, Converter={StaticResource visibilityConverter}}" SelectedDateChanged="DatePicker_SelectedDateChanged1" SelectedDate="{Binding Path=PozadovanyDatum}" >
                                        <DatePicker.ToolTip>
                                            <TextBlock Text="aa"></TextBlock>
                                        </DatePicker.ToolTip>
                                        <DatePicker.Resources>
                                            <Style TargetType="{x:Type DatePickerTextBox}" >
                                                <Setter Property="Background" Value="{Binding PozadovanyColor}" />
                                            </Style>
                                        </DatePicker.Resources>
                                    </DatePicker>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn x:Name="DokonceniDatum" Header="Datum dokončení" MinWidth="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <DatePicker Background="{Binding DokonceniColor}" MouseDoubleClick="DatePicker_MouseDoubleClick" Visibility="{Binding NotBlank, Converter={StaticResource visibilityConverter}}" MouseEnter="pozadDatum_MouseEnter" SelectedDateChanged="DatePicker_SelectedDateChanged2" SelectedDate="{Binding Path=DokonceniDatum}" >
                                        <DatePicker.ToolTip>
                                            <TextBlock Text="aa"></TextBlock>
                                        </DatePicker.ToolTip>
                                        <DatePicker.Resources>
                                            <Style TargetType="{x:Type DatePickerTextBox}" >
                                                <Setter Property="Background" Value="{Binding DokonceniColor}" />
                                            </Style>
                                        </DatePicker.Resources>
                                    </DatePicker>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <DataGridTextColumn x:Name="Mesto" ElementStyle="{StaticResource MyTextStyle}" Width="50" Binding="{Binding Mesto}">
                            <DataGridTextColumn.Header>
                                <StackPanel Orientation="Horizontal">
                                    <Label Content="Město" />
                                    <Button Name="btnMestoFilter" Margin="3,0,0,0" Click="btnFilter_Click">
                                        <Button.Template>
                                            <ControlTemplate>
                                                <Image Source="..\Resources\filter.ico" Width="20" Height="20" />
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Popup x:Name="MestoFilter" Placement="Bottom" PlacementTarget="{Binding ElementName=btnMestoFilter}" StaysOpen="False" Width="200">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1,1,1,1">
                                            <StackPanel Margin="5,5,5,15">
                                                <ListBox Height="300" x:Name="listBoxMesto" VerticalAlignment="Stretch" SelectionMode="Multiple" Margin="0,27,0,34">
                                                    <ListBox.Resources>
                                                        <Style TargetType="ListBoxItem">
                                                            <Setter Property="OverridesDefaultStyle" Value="true" />
                                                            <Setter Property="SnapsToDevicePixels" Value="true" />
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="ListBoxItem">
                                                                        <CheckBox Checked="btnFilter_checked_Click" Unchecked="btnFilter_unchecked_Click" Margin="5,2" IsChecked="{TemplateBinding IsSelected}">
                                                                            <ContentPresenter />
                                                                        </CheckBox>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListBox.Resources>
                                                </ListBox>
                                                <Button x:Name="MestoFiltrujBtn" Click="filtrujBtn_click" Content="Filtruj" Margin="5,5,5,5">
                                                </Button>
                                                <Button x:Name="MestoAllBtn" Click="allBtn_click" Content="Zobrazit vše" Margin="5,5,5,5">
                                                </Button>

                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                </StackPanel>
                            </DataGridTextColumn.Header>
                            <DataGridTextColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="ToolTip" Value="{Binding Adresa}" />
                                </Style>
                            </DataGridTextColumn.CellStyle>
                        </DataGridTextColumn>
                        
                        <DataGridTextColumn util:DatagridName.Name="Ulice" Visibility="Hidden" x:Name="Ulice" ElementStyle="{StaticResource MyTextStyle}" Width="50" Header="Ulice" Binding="{Binding Ulice}"></DataGridTextColumn>
                        
                        <DataGridTextColumn util:DatagridName.Name="Cislo" Visibility="Hidden" x:Name="Cislo" ElementStyle="{StaticResource MyTextStyle}" Width="50" Header="Cislo" Binding="{Binding Cislo}"></DataGridTextColumn>
                        
                        <DataGridTextColumn util:DatagridName.Name="Psc" Visibility="Hidden" x:Name="Psc" ElementStyle="{StaticResource MyTextStyle}" Width="50" Header="PSC" Binding="{Binding PSC}"></DataGridTextColumn>
                        
                        <DataGridTemplateColumn x:Name="AddressLink" >
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Image Visibility="{Binding NotBlank, Converter={StaticResource visibilityConverter}}" Height="18" MouseUp="HandleAddressLinkClick" Width="20" Source="..\Resources\map.ico"></Image>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <DataGridTextColumn x:Name="HotovoBloky" ElementStyle="{StaticResource MyTextStyle}" Width="80" Header="HotovoBloky" Binding="{Binding HotovoBloky}"></DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>

            <Grid x:Name="ShowHideTitleGrid" Grid.Row="3" MaxHeight="24px" HorizontalAlignment="Center">
                <Button Name="btnShowHideShop" Click="btnShowHideShop_Click" VerticalAlignment="Center" HorizontalAlignment="Center" VerticalContentAlignment="Center" Content="Zobrazit obchod"></Button>
            </Grid>

            <Grid x:Name="ShopTitleGrid" Grid.Row="4" Background="White" MaxHeight="24px">
                <Label Content="Nové zakázky"></Label>
            </Grid>

            <Grid x:Name="ShopButtonsGrid" Grid.Row="5" MaxHeight="24px" HorizontalAlignment="Left">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Button Width="90px" Grid.Column="0" Name="btnNew" Click="btnNew_Click" Padding="1" Margin="0,1,4,1" VerticalAlignment="Center" HorizontalAlignment="Left" VerticalContentAlignment="Center" >Vytvořit zakázku</Button>
                <Button Width="64px" Grid.Column="1" Name="btnDelete2" Click="btnDeleteNew_Click" Margin="0,1,4,1" VerticalAlignment="Center" HorizontalAlignment="Left" >Odstranit</Button>
                <Button Width="147px" Grid.Column="2" Name="btnProccess" Click="btnProccess_Click" Margin="0,2,-53,2" VerticalAlignment="Center" HorizontalAlignment="Left" >Předat ke zpracování</Button>

            </Grid>

            <Grid Grid.Row="6">
                <DataGrid x:Name="NewWoodDatagrid" AutoGenerateColumns="False" SelectedItem="{Binding Current_new_order}" CanUserAddRows="False" >
                    <DataGrid.Columns>
                        <DataGridTemplateColumn util:DatagridName.Name="NewZahajeniDatum" x:Name="NewZahajeniDatum" Header="ZahajeniDatum" MinWidth="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <DatePicker SelectedDateChanged="DatePicker_SelectedDateChangedNew" SelectedDate="{Binding Path=ZahajeniDatum}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn util:DatagridName.Name="NewTechnik" x:Name="NewTechnik" Header="Technik" Width="40" Binding="{Binding Technik}"></DataGridTextColumn>
                        <DataGridTextColumn util:DatagridName.Name="NewZakazka" x:Name="NewZakazka" Header="Zakazka" Width="120" Binding="{Binding Zakazka}"></DataGridTextColumn>
                        <DataGridTemplateColumn util:DatagridName.Name="NewMaterial" x:Name="NewMaterial">
                            <DataGridTemplateColumn.Header>
                                <Label >Materiál</Label>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate x:Uid="sfajfkou">
                                <DataTemplate>
                                    <TextBlock Name="Material" Text="{Binding Material}">
                                        <TextBlock.Background>
                                            <MultiBinding Converter="{StaticResource materialBackgroundConverter}">
                                                <Binding Path="MaterialColor"></Binding>
                                                <Binding Path="Material"></Binding>
                                            </MultiBinding>
                                        </TextBlock.Background>
                                    </TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn util:DatagridName.Name="NewZakazkaNr" x:Name="NewZakazkaNr" Header="Cislo zakazky" Width="70" Binding="{Binding ZakazkaNr}"></DataGridTextColumn>
                        <DataGridTextColumn util:DatagridName.Name="NewVyrobniNr" x:Name="NewVyrobniNr" Header="Vyrobni cislo" Binding="{Binding VyrobniNr}"></DataGridTextColumn>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Image Height="18" MouseUp="HandleLinkClick" Width="20" Source="..\Resources\document.ico"></Image>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

            </Grid>
        </Grid>
    </Grid>
</UserControl>
